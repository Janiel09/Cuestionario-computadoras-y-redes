<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Evaluaci√≥n de Hardware y Redes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-body: #f1f5f9;
      --bg-card: #ffffff;
      --primary: #0f766e;
      --primary-dark: #115e59;
      --primary-soft: #ccfbf1;
      --text-main: #0f172a;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --accent: #2563eb;
      --danger: #dc2626;
      --success: #16a34a;
      --radius-card: 18px;
      --shadow-card: 0 12px 30px rgba(15,23,42,0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, #e0f2fe 0, #f1f5f9 35%, #e2e8f0 100%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
    }

    .app {
      width: 100%;
      max-width: 960px;
      background: var(--bg-card);
      border-radius: 24px;
      box-shadow: var(--shadow-card);
      border: 1px solid rgba(148,163,184,0.4);
      padding: 20px 18px 16px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 6px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }

    header h1 {
      font-size: clamp(1.6rem, 2.5vw, 2rem);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .badge-version {
      font-size: 0.75rem;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(15,118,110,0.4);
      background: var(--primary-soft);
      color: var(--primary-dark);
    }

    header p {
      font-size: 0.9rem;
      color: var(--text-muted);
      max-width: 650px;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.25fr) minmax(0, 1fr);
      gap: 14px;
    }

    @media (max-width: 860px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: #ffffff;
      border-radius: var(--radius-card);
      border: 1px solid var(--border);
      padding: 14px 14px 12px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .card-header h2 {
      font-size: 1rem;
    }

    .pill {
      font-size: 0.75rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #f8fafc;
      color: var(--text-muted);
    }

    .helper {
      font-size: 0.83rem;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .field {
      margin-bottom: 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    label {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    input[type="text"] {
      padding: 9px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #f8fafc;
      color: var(--text-main);
      font-size: 0.9rem;
      outline: none;
      transition: border 0.15s ease-out, box-shadow 0.15s ease-out, background 0.15s ease-out;
    }

    input[type="text"]:focus {
      border-color: var(--primary);
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(15,118,110,0.4);
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 9px 14px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--primary);
      color: white;
      box-shadow: 0 8px 20px rgba(15,118,110,0.35);
      transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, opacity 0.15s ease-out, background 0.15s ease-out;
    }

    .btn span.icon {
      font-size: 1rem;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
    }

    .btn:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 10px 24px rgba(15,118,110,0.45);
      background: var(--primary-dark);
    }

    .btn-outline {
      background: transparent;
      border: 1px solid var(--primary);
      color: var(--primary-dark);
      box-shadow: none;
    }

    .btn-outline:hover:not(:disabled) {
      background: var(--primary-soft);
    }

    .tags-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
      font-size: 0.75rem;
    }

    .tag {
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px dashed var(--border);
      background: #f8fafc;
      color: var(--text-muted);
    }

    /* Quiz panel */

    .quiz-wrapper {
      margin-top: 10px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: #f8fafc;
      padding: 10px 10px 8px;
    }

    .quiz-header {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 8px;
    }

    .quiz-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .badge {
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #ffffff;
    }

    .progress {
      width: 100%;
      height: 7px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
    }

    .progress-inner {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, #22c55e, #0f766e);
      border-radius: inherit;
      transition: width 0.25s ease-out;
    }

    .question-text {
      font-size: 0.95rem;
      margin-bottom: 8px;
    }

    .options {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-bottom: 8px;
    }

    .option {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid #e2e8f0;
      background: #ffffff;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.15s ease-out, border 0.15s ease-out, box-shadow 0.15s ease-out, transform 0.15s ease-out;
    }

    .option:hover {
      background: #effdf9;
      border-color: rgba(15,118,110,0.7);
      box-shadow: 0 4px 12px rgba(148,163,184,0.6);
      transform: translateY(-1px);
    }

    .option input {
      margin-top: 3px;
      accent-color: var(--primary);
      cursor: pointer;
    }

    .option-label {
      display: flex;
      gap: 4px;
    }

    .option-letter {
      font-weight: 600;
      color: var(--primary-dark);
      min-width: 16px;
    }

    .quiz-footer {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .hidden {
      display: none !important;
    }

    /* Side panel (visual pedag√≥gico) */

    .side-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .side-title span.icon {
      font-size: 1.1rem;
      color: var(--accent);
    }

    .side-topic-label {
      font-size: 0.78rem;
      padding: 2px 7px;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
      border: 1px solid #bfdbfe;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 6px;
    }

    .side-topic-label span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
    }

    .side-box {
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #f8fafc;
      padding: 8px 9px;
      font-size: 0.82rem;
      color: var(--text-muted);
      min-height: 90px;
    }

    .side-box strong {
      color: var(--text-main);
    }

    .side-hint {
      margin-top: 6px;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    /* Resultados */

    .results-header {
      margin-bottom: 8px;
    }

    .results-header h2 {
      font-size: 1rem;
    }

    .results-summary {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 8px 0;
      font-size: 0.85rem;
    }

    .summary-pill {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #f8fafc;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
    }

    .dot.success { background: var(--success); }
    .dot.error { background: var(--danger); }

    .score-big {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--primary-dark);
    }

    .review-list {
      max-height: 260px;
      overflow-y: auto;
      padding-right: 4px;
      font-size: 0.82rem;
      margin-top: 8px;
    }

    .review-list::-webkit-scrollbar {
      width: 6px;
    }

    .review-list::-webkit-scrollbar-track {
      background: #e5e7eb;
      border-radius: 999px;
    }

    .review-list::-webkit-scrollbar-thumb {
      background: #a5b4fc;
      border-radius: 999px;
    }

    .review-item {
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #f8fafc;
      padding: 7px 9px;
      margin-bottom: 6px;
    }

    .review-item.correct {
      border-color: rgba(22,163,74,0.7);
      background: #ecfdf3;
    }

    .review-item.incorrect {
      border-color: rgba(220,38,38,0.7);
      background: #fef2f2;
    }

    .review-item h4 {
      font-size: 0.85rem;
      margin-bottom: 3px;
      color: var(--text-main);
    }

    .review-item p {
      margin-bottom: 2px;
      color: var(--text-muted);
    }

    .review-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 3px;
    }

    .review-tag {
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 0.72rem;
    }

    .review-tag.topic {
      color: var(--accent);
      border-color: rgba(37,99,235,0.4);
      background: #eff6ff;
    }

    footer {
      margin-top: 4px;
      font-size: 0.75rem;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>
        Evaluaci√≥n de Hardware y Redes
        <span class="badge-version">Versi√≥n C ¬∑ 20 √≠tems</span>
      </h1>
      <p>
        Escribe tu nombre, inicia la evaluaci√≥n y responde 20 preguntas de opci√≥n m√∫ltiple sobre
        componentes de hardware y redes de computadoras. Al final podr√°s revisar tus errores con
        una explicaci√≥n breve de cada concepto.
      </p>
    </header>

    <div class="layout">
      <!-- COLUMNA IZQUIERDA: datos + cuestionario + resultados -->
      <section class="card">
        <div class="card-header">
          <h2>Datos del estudiante</h2>
          <div class="pill">Requerido para iniciar</div>
        </div>
        <p class="helper">
          Tu nombre aparecer√° en la cabecera del cuestionario y en el resumen de resultados.
        </p>

        <div class="field">
          <label for="nombre">Nombre y apellidos</label>
          <input type="text" id="nombre" placeholder="Ej: Laura G√≥mez" />
        </div>

        <button id="btnIniciar" class="btn" disabled>
          <span class="icon">‚ñ∂Ô∏è</span>
          Comenzar evaluaci√≥n
        </button>

        <div class="tags-row">
          <span class="tag">üß© 20 preguntas por intento</span>
          <span class="tag">üíª Hardware y üåê Redes</span>
          <span class="tag">üìä Resultados con explicaci√≥n</span>
        </div>

        <!-- Panel de cuestionario -->
        <div id="quizPanel" class="quiz-wrapper hidden">
          <div class="quiz-header">
            <div class="quiz-top">
              <div id="lblEstudiante" class="badge">Estudiante: ‚Äî</div>
              <div id="lblProgreso" class="badge">Pregunta 0 / 20</div>
            </div>
            <div class="progress">
              <div id="barraProgreso" class="progress-inner"></div>
            </div>
          </div>

          <div id="bloquePregunta">
            <p id="textoPregunta" class="question-text">
              Escribe tu nombre y pulsa ‚ÄúComenzar evaluaci√≥n‚Äù para iniciar.
            </p>
            <ul id="listaOpciones" class="options"></ul>
          </div>

          <div class="quiz-footer">
            <button id="btnSiguiente" class="btn" disabled>
              <span class="icon">‚û°Ô∏è</span>
              Siguiente
            </button>
            <span id="notaAyuda">
              Selecciona una opci√≥n para poder avanzar.
            </span>
          </div>
        </div>

        <!-- Panel de resultados -->
        <div id="resultsPanel" class="hidden" style="margin-top:10px;">
          <div class="results-header">
            <h2>Resultados de la evaluaci√≥n</h2>
            <p class="helper" id="textoResumen"></p>
          </div>

          <div class="results-summary">
            <div class="summary-pill">
              <span class="dot success"></span>
              <span id="lblAciertos">0 aciertos</span>
            </div>
            <div class="summary-pill">
              <span class="dot error"></span>
              <span id="lblFallos">0 fallos</span>
            </div>
            <div class="summary-pill">
              üßÆ <span id="lblPorcentaje" class="score-big">0%</span>
            </div>
          </div>

          <h3 style="font-size:0.9rem;margin:6px 0;">
            Revisi√≥n de preguntas
          </h3>
          <p class="helper">
            Puedes revisar qu√© marcaste, cu√°l era la opci√≥n correcta y el concepto clave que se trabajaba en cada √≠tem.
          </p>

          <div id="listaRevision" class="review-list"></div>

          <div style="margin-top:8px;display:flex;flex-wrap:wrap;gap:8px;">
            <button id="btnReintentar" class="btn">
              <span class="icon">üîÅ</span>
              Volver a intentar con nuevas preguntas
            </button>
            <button id="btnReiniciarTodo" class="btn btn-outline">
              <span class="icon">‚úèÔ∏è</span>
              Cambiar nombre y reiniciar
            </button>
          </div>
        </div>
      </section>

      <!-- COLUMNA DERECHA: panel visual pedag√≥gico -->
      <section class="card">
        <div class="side-title">
          <span class="icon">üìò</span>
          <span>Concepto relacionado con la pregunta actual</span>
        </div>
        <div id="sideTopic" class="side-topic-label">
          <span class="dot"></span>
          Sin iniciar
        </div>
        <div id="sideBox" class="side-box">
          Antes de comenzar, recuerda que:
          <br /><br />
          <strong>Hardware</strong> son los componentes f√≠sicos de un sistema (CPU, memoria,
          discos, tarjetas de red...), mientras que <strong>red</strong> es el conjunto de dispositivos
          conectados que comparten informaci√≥n y recursos.
        </div>
        <div class="side-hint">
          A medida que avances en las preguntas, aqu√≠ ver√°s una explicaci√≥n corta del tema
          espec√≠fico (por ejemplo: memoria RAM, router, topolog√≠as, direcci√≥n IP...).
        </div>
      </section>
    </div>

    <footer>
      <span>Contenido: Fundamentos de hardware y redes de computadoras.</span>
      <span>Dise√±o adaptado a m√≥viles, tablets y equipos de escritorio.</span>
    </footer>
  </div>

  <script>
    // ===============================
    // Banco de preguntas (hardware y redes)
    // Cada objeto: { enunciado, opciones[], correcta, tema, explicacion }
    // ===============================
    const questionBank = [
      {
        enunciado: "La memoria RAM en un computador se utiliza principalmente para:",
        opciones: [
          "a) Almacenar programas de forma permanente.",
          "b) Guardar configuraciones de la BIOS.",
          "c) Almacenar temporalmente datos e instrucciones en uso.",
          "d) Mantener copias de seguridad del disco.",
          "e) Contener √∫nicamente archivos de v√≠deo."
        ],
        correcta: 2,
        tema: "Memoria RAM",
        explicacion: "La RAM es la memoria de trabajo del sistema: guarda temporalmente datos e instrucciones mientras los programas se est√°n ejecutando. Su contenido se pierde al apagar el equipo."
      },
      {
        enunciado: "¬øCu√°l de los siguientes componentes se considera el ‚Äúcerebro‚Äù del computador?",
        opciones: [
          "a) GPU",
          "b) CPU o procesador",
          "c) Tarjeta de sonido",
          "d) Fuente de poder",
          "e) Disco duro externo"
        ],
        correcta: 1,
        tema: "CPU / Procesador",
        explicacion: "La CPU ejecuta instrucciones y coordina las operaciones de todos los dem√°s componentes. De su velocidad y arquitectura depende buena parte del rendimiento general."
      },
      {
        enunciado: "¬øQu√© dispositivo de red se encarga de interconectar redes diferentes y enrutar paquetes entre ellas?",
        opciones: [
          "a) Switch no gestionable",
          "b) Repetidor de se√±al",
          "c) Router",
          "d) Hub",
          "e) Punto de acceso (AP)"
        ],
        correcta: 2,
        tema: "Router",
        explicacion: "El router conecta redes distintas (por ejemplo, tu LAN con Internet) y decide por qu√© camino enviar los paquetes usando tablas de enrutamiento."
      },
      {
        enunciado: "Una red LAN (Local Area Network) se caracteriza por:",
        opciones: [
          "a) Cubrir grandes distancias entre ciudades o pa√≠ses.",
          "b) Conectar dispositivos en un √°rea limitada como un aula o edificio.",
          "c) Utilizar √∫nicamente enlaces inal√°mbricos satelitales.",
          "d) Permitir conexi√≥n solo a servidores web.",
          "e) Ser exclusiva para redes de telefon√≠a m√≥vil."
        ],
        correcta: 1,
        tema: "Red LAN",
        explicacion: "Una LAN es una red de √°rea local: conecta dispositivos en espacios reducidos, como una casa, oficina o laboratorio, generalmente con alta velocidad y baja latencia."
      },
      {
        enunciado: "¬øQu√© afirmaci√≥n describe mejor al switch dentro de una red local?",
        opciones: [
          "a) Amplifica la se√±al sin distinguir destinos.",
          "b) Reemplaza la funci√≥n del router hacia Internet.",
          "c) Env√≠a los datos a todos los puertos, sin excepci√≥n.",
          "d) Conecta dispositivos dentro de una LAN y dirige tramas s√≥lo al puerto correspondiente.",
          "e) Sirve √∫nicamente como punto de acceso inal√°mbrico."
        ],
        correcta: 3,
        tema: "Switch",
        explicacion: "El switch trabaja t√≠picamente en capa de enlace de datos. Aprende las direcciones MAC de los dispositivos y reenv√≠a las tramas √∫nicamente al puerto donde est√° el destino."
      },
      {
        enunciado: "¬øQu√© tipo de medio de transmisi√≥n utiliza pares de hilos de cobre trenzados entre s√≠?",
        opciones: [
          "a) Fibra √≥ptica",
          "b) Cable coaxial",
          "c) Par trenzado (UTP / STP)",
          "d) Microondas terrestres",
          "e) Enlaces satelitales"
        ],
        correcta: 2,
        tema: "Par trenzado",
        explicacion: "El par trenzado (como los cables de red Ethernet UTP) utiliza pares de hilos de cobre entrelazados para reducir interferencias electromagn√©ticas."
      },
      {
        enunciado: "¬øQu√© direcci√≥n identifica de forma l√≥gica a un dispositivo en una red basada en TCP/IP?",
        opciones: [
          "a) Direcci√≥n MAC",
          "b) Direcci√≥n IP",
          "c) M√°scara de subred",
          "d) Direcci√≥n DNS",
          "e) Direcci√≥n de puerta de enlace (gateway)"
        ],
        correcta: 1,
        tema: "Direcci√≥n IP",
        explicacion: "La direcci√≥n IP es un identificador l√≥gico que permite ubicar un dispositivo dentro de una red IP. Se combina con la m√°scara de subred para determinar qu√© parte es red y cu√°l es host."
      },
      {
        enunciado: "¬øQu√© componente suministra energ√≠a el√©ctrica estable y en los voltajes adecuados a los dem√°s dispositivos del PC?",
        opciones: [
          "a) Bater√≠a de la placa madre",
          "b) Fuente de poder (PSU)",
          "c) Tarjeta de video",
          "d) M√≥dem",
          "e) Unidad de estado s√≥lido"
        ],
        correcta: 1,
        tema: "Fuente de poder",
        explicacion: "La fuente de poder convierte la corriente alterna de la red el√©ctrica en tensiones continuas adecuadas para la placa base, discos, CPU, GPU, etc."
      },
      {
        enunciado: "La memoria ROM en un sistema de c√≥mputo se caracteriza por:",
        opciones: [
          "a) Ser vol√°til y perder su contenido al apagar.",
          "b) Guardar temporalmente datos de usuario.",
          "c) Ser de s√≥lo lectura y contener informaci√≥n permanente como el firmware.",
          "d) Almacenar exclusivamente archivos de v√≠deo.",
          "e) Ser utilizada como memoria gr√°fica dedicada."
        ],
        correcta: 2,
        tema: "Memoria ROM / Firmware",
        explicacion: "La ROM suele contener el firmware de arranque (por ejemplo, BIOS/UEFI). Su contenido es estable y no depende de la energ√≠a para mantenerse."
      },
      {
        enunciado: "¬øQu√© dispositivo se usa t√≠picamente para asignar direcciones IP de forma autom√°tica a los equipos de una red?",
        opciones: [
          "a) Servidor DNS",
          "b) Servidor DHCP",
          "c) Servidor FTP",
          "d) Servidor web",
          "e) Servidor de impresi√≥n"
        ],
        correcta: 1,
        tema: "DHCP",
        explicacion: "DHCP (Dynamic Host Configuration Protocol) permite que los equipos obtengan autom√°ticamente par√°metros como IP, m√°scara, gateway y DNS sin configuraci√≥n manual."
      },
      {
        enunciado: "En una topolog√≠a en estrella, los equipos de la red:",
        opciones: [
          "a) Se conectan en un anillo cerrado sin nodo central.",
          "b) Se conectan de forma aleatoria sin patr√≥n definido.",
          "c) Est√°n conectados a un nodo central (como un switch) que concentra las comunicaciones.",
          "d) Est√°n conectados punto a punto en cadena lineal.",
          "e) Solo se conectan de manera inal√°mbrica."
        ],
        correcta: 2,
        tema: "Topolog√≠a en estrella",
        explicacion: "En la topolog√≠a en estrella todos los nodos se conectan a un dispositivo central (hub o switch). Si el nodo central falla, toda la red se ve afectada."
      },
      {
        enunciado: "La placa base (motherboard) de un computador se encarga de:",
        opciones: [
          "a) Almacenar el sistema operativo.",
          "b) Suministrar energ√≠a a la red el√©ctrica.",
          "c) Conectar y permitir la comunicaci√≥n entre CPU, memoria, almacenamiento y perif√©ricos.",
          "d) Traducir direcciones IP a nombres de dominio.",
          "e) Ejecutar directamente las aplicaciones del usuario."
        ],
        correcta: 2,
        tema: "Placa base",
        explicacion: "La placa base es el circuito principal sobre el que se montan CPU, memoria, ranuras de expansi√≥n y conectores. Act√∫a como plataforma de interconexi√≥n para todos los componentes."
      },
      {
        enunciado: "¬øQu√© componente del hardware est√° especializado en el procesamiento de gr√°ficos e im√°genes?",
        opciones: [
          "a) CPU",
          "b) GPU o tarjeta gr√°fica",
          "c) Tarjeta de sonido",
          "d) Fuente de poder",
          "e) Unidad de disco √≥ptico"
        ],
        correcta: 1,
        tema: "GPU / Tarjeta gr√°fica",
        explicacion: "La GPU est√° optimizada para operaciones en paralelo, especialmente √∫tiles para renderizar gr√°ficos, v√≠deo y tambi√©n para c√≥mputo cient√≠fico y de IA."
      },
      {
        enunciado: "¬øCu√°l de las siguientes opciones describe mejor una red WAN?",
        opciones: [
          "a) Red de √°rea personal alrededor de un usuario.",
          "b) Red que conecta dispositivos s√≥lo dentro de un aula.",
          "c) Red de √°rea amplia que puede abarcar ciudades, pa√≠ses o continentes.",
          "d) Red inal√°mbrica de corto alcance basada en Bluetooth.",
          "e) Red dedicada √∫nicamente a impresoras corporativas."
        ],
        correcta: 2,
        tema: "Red WAN",
        explicacion: "Una WAN (Wide Area Network) interconecta redes geogr√°ficamente dispersas, por ejemplo, las sedes de una empresa en distintas ciudades o pa√≠ses."
      },
      {
        enunciado: "¬øQu√© est√°ndar se utiliza de forma habitual para redes inal√°mbricas Wi-Fi en entornos dom√©sticos y de oficina?",
        opciones: [
          "a) IEEE 802.3",
          "b) IEEE 802.11",
          "c) IEEE 1394",
          "d) IEEE 754",
          "e) IEEE 802.5"
        ],
        correcta: 1,
        tema: "Wi-Fi / IEEE 802.11",
        explicacion: "El conjunto de est√°ndares IEEE 802.11 define distintas versiones de Wi-Fi (a/b/g/n/ac/ax, etc.) utilizadas para redes inal√°mbricas de corta y media distancia."
      },
      {
        enunciado: "La direcci√≥n MAC de una tarjeta de red se utiliza para:",
        opciones: [
          "a) Identificar l√≥gicamente al dispositivo en Internet.",
          "b) Identificar de manera f√≠sica la interfaz de red a nivel de enlace de datos.",
          "c) Indicar la puerta de enlace por defecto.",
          "d) Identificar el servicio DNS preferido.",
          "e) Indicar el tipo de medio f√≠sico utilizado."
        ],
        correcta: 1,
        tema: "Direcci√≥n MAC",
        explicacion: "La direcci√≥n MAC es un identificador f√≠sico √∫nico de la tarjeta de red a nivel de capa de enlace. La utilizan switches y otros dispositivos para reenviar tramas."
      },
      {
        enunciado: "¬øCu√°l de los siguientes es un ejemplo claro de perif√©rico de entrada de datos?",
        opciones: [
          "a) Impresora de inyecci√≥n de tinta",
          "b) Monitor LED",
          "c) Parlantes est√©reo",
          "d) Teclado",
          "e) Proyector multimedia"
        ],
        correcta: 3,
        tema: "Perif√©ricos de entrada",
        explicacion: "El teclado permite introducir datos y comandos al sistema. Es un perif√©rico cl√°sico de entrada."
      },
      {
        enunciado: "El protocolo HTTP/HTTPS se utiliza principalmente para:",
        opciones: [
          "a) Enviar y recibir correos electr√≥nicos.",
          "b) Transferir archivos grandes entre servidores.",
          "c) Administrar remotamente dispositivos de red.",
          "d) Navegar y acceder a p√°ginas web.",
          "e) Sincronizar relojes en la red."
        ],
        correcta: 3,
        tema: "HTTP / HTTPS",
        explicacion: "HTTP y su versi√≥n segura HTTPS son los protocolos base de la World Wide Web: definen c√≥mo cliente y servidor intercambian peticiones y respuestas de p√°ginas y recursos."
      },
      {
        enunciado: "¬øQu√© dispositivo se utiliza para extender el alcance de una se√±al sin interpretar el contenido de los datos?",
        opciones: [
          "a) Router de borde",
          "b) Switch capa 3",
          "c) Repetidor",
          "d) Firewall",
          "e) Proxy de contenido"
        ],
        correcta: 2,
        tema: "Repetidor",
        explicacion: "El repetidor regenera y amplifica la se√±al para cubrir mayores distancias, pero no toma decisiones de encaminamiento ni filtrado de tr√°fico."
      },
      {
        enunciado: "En el modelo OSI, los switches Ethernet cl√°sicos suelen trabajar principalmente en la capa:",
        opciones: [
          "a) Aplicaci√≥n",
          "b) Transporte",
          "c) Red",
          "d) Enlace de datos",
          "e) F√≠sica"
        ],
        correcta: 3,
        tema: "Modelo OSI / Capa 2",
        explicacion: "Los switches tradicionales operan en capa de enlace de datos (capa 2), usando direcciones MAC para reenviar tramas entre puertos."
      },
      {
        enunciado: "¬øQu√© componente almacena el sistema operativo y los archivos del usuario de manera persistente?",
        opciones: [
          "a) Memoria cach√© L1",
          "b) Memoria RAM",
          "c) Disco duro o unidad SSD",
          "d) Memoria ROM",
          "e) Tarjeta de red"
        ],
        correcta: 2,
        tema: "Almacenamiento secundario",
        explicacion: "Los discos duros y SSD son dispositivos de almacenamiento masivo que conservan la informaci√≥n incluso cuando el equipo est√° apagado."
      },
      {
        enunciado: "Cuando hablamos de ‚Äúancho de banda‚Äù en una red, nos referimos a:",
        opciones: [
          "a) El n√∫mero de usuarios conectados a la vez.",
          "b) La distancia m√°xima del cableado.",
          "c) La capacidad m√°xima de transmisi√≥n de datos en un intervalo de tiempo.",
          "d) El tama√±o f√≠sico del cable.",
          "e) El n√∫mero de puertos del switch."
        ],
        correcta: 2,
        tema: "Ancho de banda",
        explicacion: "El ancho de banda indica cu√°ntos datos pueden circular por un enlace en un tiempo dado (por ejemplo, Mbps). Cuanto mayor, m√°s tr√°fico soporta la red."
      },
      {
        enunciado: "¬øCu√°l de estas opciones describe mejor el rol de la tarjeta de red (NIC)?",
        opciones: [
          "a) Acelerar el procesador principal.",
          "b) Proporcionar energ√≠a a los perif√©ricos.",
          "c) Conectar el equipo a la red y manejar el env√≠o/recepci√≥n de tramas o paquetes.",
          "d) Ejecutar el sistema operativo.",
          "e) Reemplazar la funci√≥n de la GPU."
        ],
        correcta: 2,
        tema: "Tarjeta de red (NIC)",
        explicacion: "La NIC es la interfaz f√≠sica y l√≥gica del equipo con la red. Se encarga de enviar y recibir tramas/paquetes seg√∫n el tipo de medio y protocolo."
      }
    ];

    const TOTAL_PREGUNTAS = 20;

    // Estado
    let selectedQuestions = [];
    let currentIndex = 0;
    let studentName = "";
    let answersLog = []; // {enunciado, opciones, elegida, correcta, tema, explicacion}

    // DOM
    const inputNombre = document.getElementById("nombre");
    const btnIniciar = document.getElementById("btnIniciar");
    const quizPanel = document.getElementById("quizPanel");
    const resultsPanel = document.getElementById("resultsPanel");

    const lblEstudiante = document.getElementById("lblEstudiante");
    const lblProgreso = document.getElementById("lblProgreso");
    const barraProgreso = document.getElementById("barraProgreso");
    const textoPregunta = document.getElementById("textoPregunta");
    const listaOpciones = document.getElementById("listaOpciones");
    const btnSiguiente = document.getElementById("btnSiguiente");
    const notaAyuda = document.getElementById("notaAyuda");

    const textoResumen = document.getElementById("textoResumen");
    const lblAciertos = document.getElementById("lblAciertos");
    const lblFallos = document.getElementById("lblFallos");
    const lblPorcentaje = document.getElementById("lblPorcentaje");
    const listaRevision = document.getElementById("listaRevision");
    const btnReintentar = document.getElementById("btnReintentar");
    const btnReiniciarTodo = document.getElementById("btnReiniciarTodo");

    const sideTopic = document.getElementById("sideTopic");
    const sideBox = document.getElementById("sideBox");

    // Utilidades
    function shuffle(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function pickRandomQuestions(count) {
      const shuffled = shuffle(questionBank);
      return shuffled.slice(0, count);
    }

    // Actualiza panel lateral
    function updateSidePanel(question) {
      if (!question) {
        sideTopic.innerHTML = '<span class="dot"></span> Sin iniciar';
        sideBox.innerHTML =
          "Antes de comenzar, recuerda que:<br /><br /><strong>Hardware</strong> son los componentes f√≠sicos de un sistema (CPU, memoria, discos, tarjetas de red...), mientras que <strong>red</strong> es el conjunto de dispositivos conectados que comparten informaci√≥n y recursos.";
        return;
      }
      sideTopic.innerHTML = '<span class="dot"></span> ' + question.tema;
      sideBox.innerHTML = "<strong>" + question.tema + ":</strong> " + question.explicacion;
    }

    // Inicia cuestionario
    function startQuiz() {
      studentName = inputNombre.value.trim();
      if (!studentName) return;

      selectedQuestions = pickRandomQuestions(TOTAL_PREGUNTAS);
      currentIndex = 0;
      answersLog = [];

      lblEstudiante.textContent = "Estudiante: " + studentName;
      quizPanel.classList.remove("hidden");
      resultsPanel.classList.add("hidden");

      renderQuestion();
    }

    function renderQuestion() {
      const q = selectedQuestions[currentIndex];
      const total = selectedQuestions.length;

      lblProgreso.textContent = "Pregunta " + (currentIndex + 1) + " / " + total;
      const percent = (currentIndex / total) * 100;
      barraProgreso.style.width = percent + "%";

      textoPregunta.textContent = q.enunciado;
      listaOpciones.innerHTML = "";
      btnSiguiente.disabled = true;
      notaAyuda.textContent = "Selecciona una opci√≥n para poder avanzar.";

      // Panel lateral
      updateSidePanel(q);

      q.opciones.forEach((text, idx) => {
        const li = document.createElement("li");
        li.className = "option";

        const input = document.createElement("input");
        input.type = "radio";
        input.name = "opcion";
        input.id = "op-" + idx;
        input.value = idx;

        const label = document.createElement("label");
        label.setAttribute("for", "op-" + idx);
        label.className = "option-label";

        const letterSpan = document.createElement("span");
        letterSpan.className = "option-letter";
        letterSpan.textContent = String.fromCharCode(97 + idx) + ")";

        const textSpan = document.createElement("span");
        textSpan.textContent = text.replace(/^[a-e]\)\s*/i, "");

        label.appendChild(letterSpan);
        label.appendChild(textSpan);

        li.appendChild(input);
        li.appendChild(label);
        listaOpciones.appendChild(li);

        li.addEventListener("click", () => {
          input.checked = true;
          btnSiguiente.disabled = false;
          notaAyuda.textContent = "Revisa tu elecci√≥n y, si est√°s seguro, pulsa Siguiente.";
        });

        input.addEventListener("change", () => {
          btnSiguiente.disabled = false;
          notaAyuda.textContent = "Revisa tu elecci√≥n y, si est√°s seguro, pulsa Siguiente.";
        });
      });

      btnSiguiente.innerHTML =
        currentIndex === total - 1
          ? '<span class="icon">‚úÖ</span> Finalizar evaluaci√≥n'
          : '<span class="icon">‚û°Ô∏è</span> Siguiente';
    }

    function handleNext() {
      const selected = document.querySelector('input[name="opcion"]:checked');
      if (!selected) return;

      const chosenIndex = parseInt(selected.value, 10);
      const q = selectedQuestions[currentIndex];

      answersLog.push({
        enunciado: q.enunciado,
        opciones: q.opciones,
        elegida: chosenIndex,
        correcta: q.correcta,
        tema: q.tema,
        explicacion: q.explicacion
      });

      currentIndex++;
      if (currentIndex < selectedQuestions.length) {
        renderQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      const total = answersLog.length;
      const correct = answersLog.filter(a => a.elegida === a.correcta).length;
      const incorrect = total - correct;
      const percent = Math.round((correct / total) * 100);

      quizPanel.classList.add("hidden");
      resultsPanel.classList.remove("hidden");

      textoResumen.textContent =
        "Buen trabajo, " + studentName +
        ". Aqu√≠ puedes ver cu√°ntas respuestas acertaste y revisar cada concepto para afianzar el aprendizaje.";

      lblAciertos.textContent = correct + " aciertos";
      lblFallos.textContent = incorrect + " fallos";
      lblPorcentaje.textContent = percent + "%";

      listaRevision.innerHTML = "";
      answersLog.forEach((a, idx) => {
        const isCorrect = a.elegida === a.correcta;
        const div = document.createElement("div");
        div.className = "review-item " + (isCorrect ? "correct" : "incorrect");

        const title = document.createElement("h4");
        title.textContent = "Pregunta " + (idx + 1);
        div.appendChild(title);

        const pText = document.createElement("p");
        pText.textContent = a.enunciado;
        div.appendChild(pText);

        const pYour = document.createElement("p");
        const yourText =
          a.elegida >= 0 ? a.opciones[a.elegida] : "No respondida";
        pYour.innerHTML = "<strong>Tu respuesta:</strong> " + yourText;
        div.appendChild(pYour);

        if (!isCorrect) {
          const pCorrect = document.createElement("p");
          pCorrect.innerHTML =
            "<strong>Respuesta correcta:</strong> " + a.opciones[a.correcta];
          div.appendChild(pCorrect);
        }

        const pConcept = document.createElement("p");
        pConcept.innerHTML =
          "<strong>Concepto trabajado:</strong> " + a.tema + ". " + a.explicacion;
        div.appendChild(pConcept);

        const tagsRow = document.createElement("div");
        tagsRow.className = "review-tags";

        const tagTopic = document.createElement("span");
        tagTopic.className = "review-tag topic";
        tagTopic.textContent = a.tema;

        const tagState = document.createElement("span");
        tagState.className = "review-tag";
        tagState.textContent = isCorrect ? "‚úÖ Acertada" : "‚ùå Fallida";

        tagsRow.appendChild(tagTopic);
        tagsRow.appendChild(tagState);
        div.appendChild(tagsRow);

        listaRevision.appendChild(div);
      });

      // Completar barra y panel lateral final
      barraProgreso.style.width = "100%";
      lblProgreso.textContent = "Completaste las " + total + " preguntas";

      sideTopic.innerHTML = '<span class="dot"></span> Revisi√≥n final';
      sideBox.innerHTML =
        "Utiliza este resumen para identificar en qu√© temas est√°s m√°s seguro (por ejemplo, <strong>almacenamiento</strong>, <strong>direccionamiento IP</strong>) y cu√°les necesitas repasar con m√°s calma (como <strong>modelo OSI</strong>, <strong>topolog√≠as</strong> o <strong>protocolos</strong>).";
    }

    function resetSameName() {
      startQuiz();
    }

    function resetAll() {
      inputNombre.value = "";
      btnIniciar.disabled = true;
      studentName = "";
      selectedQuestions = [];
      answersLog = [];
      currentIndex = 0;

      quizPanel.classList.add("hidden");
      resultsPanel.classList.add("hidden");

      textoPregunta.textContent =
        "Escribe tu nombre y pulsa ‚ÄúComenzar evaluaci√≥n‚Äù para iniciar.";
      listaOpciones.innerHTML = "";
      lblEstudiante.textContent = "Estudiante: ‚Äî";
      lblProgreso.textContent = "Pregunta 0 / 20";
      barraProgreso.style.width = "0%";
      notaAyuda.textContent = "Selecciona una opci√≥n para poder avanzar.";

      updateSidePanel(null);
    }

    // Eventos
    inputNombre.addEventListener("input", () => {
      const val = inputNombre.value.trim();
      btnIniciar.disabled = val.length < 2;
    });

    btnIniciar.addEventListener("click", startQuiz);
    btnSiguiente.addEventListener("click", handleNext);
    btnReintentar.addEventListener("click", resetSameName);
    btnReiniciarTodo.addEventListener("click", resetAll);

    // Estado inicial panel lateral
    updateSidePanel(null);
  </script>
</body>
</html>
